<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vintage Lumber Bulgaria</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { scroll-behavior: smooth; background: #f4eadf; color: #333; font-family: sans-serif; }
  nav a { margin: 0 12px; cursor:pointer; color:#6B4226; text-decoration:none; }
  nav a:hover { text-decoration:underline; }
  .hidden { display:none; }
  /* ====== MODAL COMMON STYLES ====== */
  .overlay { position: absolute; inset:0; background: rgba(0,0,0,0.55); backdrop-filter: blur(2px); }
  .box { position: relative; z-index:2201; width:360px; max-width:92%; background:#fff; border-radius:10px; padding:18px; box-shadow:0 10px 30px rgba(0,0,0,0.25);}
  .box h3 { margin:0 0 8px; color:#6B4226; font-size:1.15rem; }
  .close-btn { position:absolute; right:10px; top:8px; border:none; background:transparent; color:#6B4226; font-size:18px; cursor:pointer; }
  #contactModal, #orderSection { display:none; position:fixed; inset:0; align-items:center; justify-content:center; z-index:2200;}
  #contactModal.open, #orderSection.open { display:flex; }
  #orderSection input, #orderSection button, #orderSection label { width:100%; margin-bottom:8px; }
  #orderSection input { padding:8px; border:1px solid #ccc; border-radius:4px; box-sizing:border-box; }
  #orderSection button[type="submit"] { background:#6B4226; color:#fff; padding:10px 16px; border:none; border-radius:4px; cursor:pointer; }
  #orderSection button[type="submit"]:hover { background:#A66B3C; }
</style>
</head>
<body>

<!-- ====== NAVIGATION ====== -->
<nav>
  <a id="navHome">
    <span class="lang-bg">Начало</span>
    <span class="lang-en hidden">Home</span>
  </a>
  <a id="navProducts">
    <span class="lang-bg">Продукти</span>
    <span class="lang-en hidden">Products</span>
  </a>
  <a id="navContact">
    <span class="lang-bg">Контакти</span>
    <span class="lang-en hidden">Contact</span>
  </a>
  <a id="vl-checkout">
    <span class="lang-bg">Финализирай поръчката</span>
    <span class="lang-en hidden">Checkout</span>
  </a>
</nav>

<!-- ====== CONTACT MODAL ====== -->
<div id="contactModal" aria-hidden="true" role="dialog" aria-labelledby="contactModalTitle">
  <div class="overlay" data-close="true"></div>
  <div class="box" role="document">
    <button class="close-btn" aria-label="Затвори" data-close="true">✕</button>
    <h3 id="contactModalTitle">Контакти</h3>
    <p><strong>Телефон:</strong> <a href="tel:+359881234567">+359 88 123 4567</a></p>
    <p><strong>Имейл:</strong> <a href="mailto:info@vintagelumber.bg">info@vintagelumber.bg</a></p>
    <p><strong>Адрес:</strong> ул. Ретро 12, София</p>
  </div>
</div>

<!-- ====== ORDER FORM MODAL ====== -->
<div id="orderSection" aria-hidden="true" role="dialog">
  <div class="overlay" data-close="true"></div>
  <div class="box" role="document">
    <button class="close-btn" aria-label="Затвори" data-close="true">✕</button>
    <h3>Формуляр за поръчка</h3>
    <form id="vl-order-form" action="https://formspree.io/f/mjggggpl" method="POST">
      <label>Име:</label>
      <input type="text" name="name" required>
      <label>Телефон:</label>
      <input type="tel" name="phone" required>
      <label>Имейл:</label>
      <input type="email" name="_replyto" required>
      <label>Адрес:</label>
      <input type="text" name="address">
      <input type="hidden" name="cart_contents" id="vl-order-cart-contents">
      <button type="submit">Изпрати поръчката</button>
    </form>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){

  // ====== CONTACT MODAL LOGIC ======
  const navContact = document.getElementById('navContact');
  const contactModal = document.getElementById('contactModal');
  if(navContact && contactModal){
    function openContactModal(e){ if(e) e.preventDefault(); contactModal.classList.add('open'); contactModal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; }
    function closeContactModal(){ contactModal.classList.remove('open'); contactModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }
    navContact.addEventListener('click', openContactModal);
    contactModal.addEventListener('click', e=>{ if(e.target.dataset && e.target.dataset.close==='true') closeContactModal(); });
    document.addEventListener('keydown', e=>{ if(e.key==='Escape' && contactModal.classList.contains('open')) closeContactModal(); });
  }

  // ====== ORDER MODAL LOGIC ======
  const orderModal = document.getElementById('orderSection');
  const checkoutBtn = document.getElementById('vl-checkout');
  const orderCartField = document.getElementById('vl-order-cart-contents');
  if(checkoutBtn && orderModal){
    checkoutBtn.addEventListener('click', e=>{
      e.preventDefault();
      const cart = JSON.parse(localStorage.getItem('vl_cart_v1')||'[]');
      if(cart.length===0){ alert('Нямате добавени продукти в кошницата.'); return; }
      orderCartField.value = JSON.stringify(cart);
      orderModal.classList.add('open'); orderModal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden';
    });
    const closeOrderBtns = orderModal.querySelectorAll('[data-close="true"]');
    closeOrderBtns.forEach(b=>b.addEventListener('click', ()=>{ orderModal.classList.remove('open'); orderModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }));
    orderModal.addEventListener('click', e=>{ if(e.target===orderModal){ orderModal.classList.remove('open'); orderModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; } });
    document.addEventListener('keydown', e=>{ if(e.key==='Escape' && orderModal.classList.contains('open')){ orderModal.classList.remove('open'); orderModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; } });
  }

});
</script>

</body>
</html>
