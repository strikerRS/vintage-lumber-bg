<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vintage Lumber Bulgaria</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { scroll-behavior: smooth; background: #f4eadf; color: #333; }
#hero-bg { background-image: url('bg-old-bulgarian-farm.jpg'); background-attachment: fixed; background-size: cover; background-position: center; height: 100vh; }
header { position: fixed; top:0; left:0; width:100%; background: rgba(255,255,255,0.95); z-index:50; display:flex; justify-content:space-between; align-items:center; padding:1rem 2rem; box-shadow:0 2px 8px rgba(0,0,0,0.2); }
header h1 { font-size:1.75rem; color:#6B4226; font-weight:bold; cursor:pointer; }
nav a { margin-left:1rem; font-weight:500; color:#6B4226; transition:0.3s; cursor:pointer; }
nav a:hover{color:#A66B3C;}
.cart-btn{background:#6B4226;color:white;border-radius:50%;width:3rem;height:3rem;display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer;}
.cart-count{position:absolute;top:-0.5rem;right:-0.5rem;background:red;width:1.25rem;height:1.25rem;font-size:0.75rem;border-radius:50%;display:flex;align-items:center;justify-content:center;}
#about { max-width:7xl; margin: 2rem auto; padding:2rem; background:#fff; border-radius:0.5rem; }
.gallery-container { position: relative; display: flex; flex-direction: column; }
.gallery-main { width: 100%; height: 300px; object-fit: cover; border-radius:0.5rem; margin-bottom:1rem; cursor:pointer; }
.gallery-thumbs { display: flex; gap:0.5rem; }
.gallery-thumbs img { width:70px;height:70px;object-fit:cover;border-radius:0.25rem;cursor:pointer;border:2px solid transparent; }
.gallery-thumbs img.active{border-color:#6B4226;}
.arrow-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(107,66,38,0.8);color:white;border:none;font-size:2rem;padding:0.25rem 0.5rem;cursor:pointer;border-radius:0.25rem;}
.arrow-left{left:0;}
.arrow-right{right:0;}
#lightboxOverlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);align-items:center;justify-content:center;z-index:100;backdrop-filter:blur(6px);}
#lightboxOverlay img{max-width:90%;max-height:90%;}
#lightboxOverlay button{position:absolute;top:50%;transform:translateY(-50%);background:rgba(107,66,38,0.8);color:white;border:none;font-size:2rem;padding:0.5rem;cursor:pointer;border-radius:0.25rem;}
#lightboxLeft{left:10px;} #lightboxRight{right:10px;}
#productPage { display:none; padding-top:4rem; }
#productPage .content { background: rgba(255,255,255,0.95); border-radius:0.5rem; padding:2rem; max-width:6xl; margin:2rem auto; }
</style>
</head>
<body>

<header>
<h1 id="homeBtn">Vintage Lumber</h1>
<nav class="flex items-center">
<a id="navHome">–ù–∞—á–∞–ª–æ</a>
<a id="navProducts">–ü—Ä–æ–¥—É–∫—Ç–∏</a>
<a id="navContact">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
<a id="navAbout">–ó–∞ –Ω–∞—Å</a>
<div class="cart-btn ml-4">üõí<span class="cart-count">0</span></div>
</nav>
</header>

<section id="hero-bg"></section>

<div id="mainPage" class="mt-24">
<main class="max-w-7xl mx-auto p-10 grid md:grid-cols-3 gap-8">
<a href="index.html?product=dd1" class="bg-white rounded-xl shadow hover:scale-105 transition">
<img src="images/dd1.jpg" class="h-56 w-full object-cover rounded-t-xl">
<div class="p-4 text-center">
<h3 class="font-semibold text-lg">–°—Ç–∞—Ä–∞ –¥—ä—Ä–≤–µ–Ω–∞ –¥—ä—Å–∫–∞</h3>
<p class="text-[#6B4226] font-bold">–†–∞–∑–≥–ª–µ–¥–∞–π –ø—Ä–æ–¥—É–∫—Ç–∞</p>
</div>
</a>
<a href="index.html?product=dd2" class="bg-white rounded-xl shadow hover:scale-105 transition">
<img src="images/dd2.jpg" class="h-56 w-full object-cover rounded-t-xl">
<div class="p-4 text-center">
<h3 class="font-semibold text-lg">–†—É—Å—Ç–∏–∫ –¥—ä—Å–∫–∞</h3>
<p class="text-[#6B4226] font-bold">–†–∞–∑–≥–ª–µ–¥–∞–π –ø—Ä–æ–¥—É–∫—Ç–∞</p>
</div>
</a>
<a href="index.html?product=dg1" class="bg-white rounded-xl shadow hover:scale-105 transition">
<img src="images/dg1.jpg" class="h-56 w-full object-cover rounded-t-xl">
<div class="p-4 text-center">
<h3 class="font-semibold text-lg">–°—Ç–∞—Ä–∞ –º–∞—Å–∏–≤–Ω–∞ –≥—Ä–µ–¥–∞</h3>
<p class="text-[#6B4226] font-bold">–†–∞–∑–≥–ª–µ–¥–∞–π –ø—Ä–æ–¥—É–∫—Ç–∞</p>
</div>
</a>
</main>

<div id="about">
<h2 class="text-2xl font-bold mb-4">–ó–∞ –Ω–∞—Å</h2>
<p>Vintage Lumber Bulgaria –µ –º–∞–ª–∫–∞ —Å–µ–º–µ–π–Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è, –∫–æ—è—Ç–æ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞ –∞–≤—Ç–µ–Ω—Ç–∏—á–Ω–∏ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –¥—ä—Ä–≤–µ–Ω–∏ –¥—ä—Å–∫–∏ –∏ –≥—Ä–µ–¥–∏ —Å —É–Ω–∏–∫–∞–ª–Ω–∞ –ø–∞—Ç–∏–Ω–∞ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä. –ù–∞—à–∞—Ç–∞ –º–∏—Å–∏—è –µ –¥–∞ —Å—ä—Ö—Ä–∞–Ω–∏–º —Ç—Ä–∞–¥–∏—Ü–∏—è—Ç–∞ –∏ –∫—Ä–∞—Å–æ—Ç–∞—Ç–∞ –Ω–∞ —Å—Ç–∞—Ä–æ—Ç–æ –¥—ä—Ä–≤–æ –∏ –¥–∞ —è –∏–Ω—Ç–µ–≥—Ä–∏—Ä–∞–º–µ –≤ –º–æ–¥–µ—Ä–Ω–∏—è –∏–Ω—Ç–µ—Ä–∏–æ—Ä.</p>
</div>
</div>

<div id="productPage">
<div class="content">
<div class="grid md:grid-cols-2 gap-10 mt-6">
<div class="gallery-container">
<button class="arrow-btn arrow-left">&#8592;</button>
<img id="mainImage" class="gallery-main" src="" alt="–ü—Ä–æ–¥—É–∫—Ç">
<button class="arrow-btn arrow-right">&#8594;</button>
<div id="galleryThumbs" class="gallery-thumbs"></div>
</div>
<div>
<h1 id="title" class="text-3xl font-bold text-[#6B4226] mb-4"></h1>
<p id="description" class="mb-6"></p>
<h2 class="text-xl font-bold mb-2">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h2>
<ul id="specs" class="list-disc ml-5 mb-6"></ul>
<h2 class="text-xl font-bold mb-2">–î–æ—Å—Ç–∞–≤–∫–∞</h2>
<p id="delivery"></p>
</div>
</div>
</div>
</div>

<section id="contact" class="max-w-7xl mx-auto p-10 mt-20">
<h2 class="text-2xl font-bold mb-4">–ö–æ–Ω—Ç–∞–∫—Ç–∏</h2>
<p>–¢–µ–ª–µ—Ñ–æ–Ω: +359 88 123 4567</p>
<p>–ò–º–µ–π–ª: info@vintagelumber.bg</p>
</section>

<div id="lightboxOverlay" class="flex">
<button id="lightboxLeft">‚Üê</button>
<img id="lightboxImage" src="" alt="–ü—Ä–æ–¥—É–∫—Ç">
<button id="lightboxRight">‚Üí</button>
</div>

<!-- –ò–Ω–ø—Ä–µ–≥–Ω–∏—Ä–∞–Ω –º–æ–¥–∞–ª –∑–∞ –ó–∞ –Ω–∞—Å -->
<div id="aboutModal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center z-50 p-4">
  <div class="bg-white rounded-xl max-w-4xl w-full p-8 overflow-y-auto max-h-[90vh] relative">
    <button id="closeAboutModal" class="text-[#6B4226] font-bold text-lg mb-4 absolute top-4 right-4">‚úï –ó–∞—Ç–≤–æ—Ä–∏</button>
    <h2 class="text-3xl font-bold text-[#6B4226] mb-4">–ò—Å—Ç–æ—Ä–∏—è –Ω–∞ Vintage Lumber Bulgaria</h2>
    <nav class="mb-4 flex gap-4 text-[#6B4226] font-semibold">
      <a href="#aboutIntro" class="aboutNavLink">–í—ä–≤–µ–¥–µ–Ω–∏–µ</a>
      <a href="#aboutGrowth" class="aboutNavLink">–†–∞–∑–≤–∏—Ç–∏–µ</a>
      <a href="#aboutMission" class="aboutNavLink">–ú–∏—Å–∏—è</a>
      <a href="#aboutLegacy" class="aboutNavLink">–ù–∞—Å–ª–µ–¥—Å—Ç–≤–æ</a>
    </nav>
    <section id="aboutIntro" class="mb-4">
      <h3 class="text-xl font-bold mb-2">–í—ä–≤–µ–¥–µ–Ω–∏–µ</h3>
      <p>Vintage Lumber Bulgaria –∑–∞–ø–æ—á–≤–∞ –∫–∞—Ç–æ –º–∞–ª–∫–∞ —Å–µ–º–µ–π–Ω–∞ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ –ø—Ä–µ–¥–∏ –¥–µ—Å–µ—Ç–∏–ª–µ—Ç–∏–µ, —Å—ä—Å —Å—Ç—Ä–∞—Å—Ç –∫—ä–º –≤—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ—Ç–æ –Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—á–Ω–∏ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –¥—ä—Ä–≤–µ–Ω–∏ –¥—ä—Å–∫–∏ –∏ –≥—Ä–µ–¥–∏. –û—Å–Ω–æ–≤–∞—Ç–µ–ª–∏—Ç–µ –≤—è—Ä–≤–∞—Ç, —á–µ –≤—Å—è–∫–æ –ø–∞—Ä—á–µ –¥—ä—Ä–≤–æ –Ω–æ—Å–∏ —Å–≤–æ—è —É–Ω–∏–∫–∞–ª–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä, –∏ —á–µ —Ç–µ–∑–∏ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞—Å–ª—É–∂–∞–≤–∞—Ç –¥–∞ –±—ä–¥–∞—Ç –ø—Ä–µ–¥–∞–¥–µ–Ω–∏ –Ω–∞ —Å–ª–µ–¥–≤–∞—â–∏—Ç–µ –ø–æ–∫–æ–ª–µ–Ω–∏—è.</p>
    </section>
    <section id="aboutGrowth" class="mb-4">
      <h3 class="text-xl font-bold mb-2">–†–∞–∑–≤–∏—Ç–∏–µ</h3>
      <p>–ü—Ä–µ–∑ –≥–æ–¥–∏–Ω–∏—Ç–µ –∫–æ–º–ø–∞–Ω–∏—è—Ç–∞ —Å–µ —Ä–∞–∑—Ä–∞—Å—Ç–≤–∞, –∫–∞—Ç–æ —Å—ä—á–µ—Ç–∞–≤–∞ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∏—Ç–µ —Ç–µ—Ö–Ω–∏–∫–∏ –Ω–∞ —Ä—ä—á–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –¥—ä—Ä–≤–æ —Å –º–æ–¥–µ—Ä–Ω–∏ –∏–Ω—Ç–µ—Ä–∏–æ—Ä–Ω–∏ —Ç–µ–Ω–¥–µ–Ω—Ü–∏–∏. –í—Å–µ–∫–∏ –ø—Ä–æ–¥—É–∫—Ç –ø—Ä–µ–º–∏–Ω–∞–≤–∞ –ø—Ä–µ–∑ –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω –ø—Ä–æ—Ü–µ—Å –Ω–∞ –ø–æ–¥–±–æ—Ä, —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏—è –∏ —Ñ–∏–Ω–∞–ª–Ω–æ –æ–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ, –∑–∞ –¥–∞ —Å–µ –∑–∞–ø–∞–∑–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–∞—Ç–∞ –º—É –∫—Ä–∞—Å–æ—Ç–∞ –∏ –ø–∞—Ç–∏–Ω–∞.</p>
    </section>
    <section id="aboutMission" class="mb-4">
      <h3 class="text-xl font-bold mb-2">–ú–∏—Å–∏—è</h3>
      <p>–ù–∞—à–∞—Ç–∞ –º–∏—Å–∏—è –µ –¥–∞ —Å—ä—Ö—Ä–∞–Ω–∏–º –∏ –ø–æ–ø—É–ª—è—Ä–∏–∑–∏—Ä–∞–º–µ —É–Ω–∏–∫–∞–ª–Ω–æ—Ç–æ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–æ –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–æ—Ç–æ –¥—ä—Ä–≤–æ, –¥–∞ –ø—Ä–µ–¥–ª–æ–∂–∏–º –ø—Ä–æ–¥—É–∫—Ç–∏, –∫–æ–∏—Ç–æ –≤–¥—ä—Ö–Ω–æ–≤—è–≤–∞—Ç –∏ —Å—ä–∑–¥–∞–≤–∞—Ç —Ç–æ–ø–ª–∏–Ω–∞ –≤ –¥–æ–º–æ–≤–µ—Ç–µ –∏ –∏–Ω—Ç–µ—Ä–∏–æ—Ä–∏—Ç–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ –Ω–∏. –í—è—Ä–≤–∞–º–µ, —á–µ –≤—Å–µ–∫–∏ –¥–æ–º –∑–∞—Å–ª—É–∂–∞–≤–∞ –¥–∞ –∏–º–∞ —Å–≤–æ—è—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä, –∞ –Ω–∞—à–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏ —Å–∞ —á–∞—Å—Ç –æ—Ç —Ç–∞–∑–∏ –∏—Å—Ç–æ—Ä–∏—è.</p>
    </section>
    <section id="aboutLegacy" class="mb-4">
      <h3 class="text-xl font-bold mb-2">–ù–∞—Å–ª–µ–¥—Å—Ç–≤–æ</h3>
      <p>–° —Ç–µ—á–µ–Ω–∏–µ –Ω–∞ –≤—Ä–µ–º–µ—Ç–æ Vintage Lumber Bulgaria —Å–µ —É—Ç–≤—ä—Ä–∂–¥–∞–≤–∞ –∫–∞—Ç–æ —Å–∏–º–≤–æ–ª –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ, –∞–≤—Ç–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç –∏ –ª—é–±–æ–≤ –∫—ä–º –¥–µ—Ç–∞–π–ª–∞, –∞ –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ –Ω–∏ —Å–∞ –Ω–∞—à–∞—Ç–∞ –Ω–∞–π-–≥–æ–ª—è–º–∞ –≥–æ—Ä–¥–æ—Å—Ç –∏ –≤–¥—ä—Ö–Ω–æ–≤–µ–Ω–∏–µ –∑–∞ –±—ä–¥–µ—â–∏ –ø—Ä–æ–µ–∫—Ç–∏.</p>
    </section>
  </div>
</div>

<script>
const products={ dd1:{title:"–°—Ç–∞—Ä–∞ –¥—ä—Ä–≤–µ–Ω–∞ –¥—ä—Å–∫–∞",images:["images/dd1.jpg","images/dd2.jpg","images/dg1.jpg"],description:"–ê–≤—Ç–µ–Ω—Ç–∏—á–Ω–∞ —Å—Ç–∞—Ä–∞ –¥—ä—Ä–≤–µ–Ω–∞ –¥—ä—Å–∫–∞...",specs:["–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–æ —Å—Ç–∞—Ä–æ –¥—ä—Ä–≤–æ","–†—ä—á–Ω–∞ —Å–µ–ª–µ–∫—Ü–∏—è","–ü–æ–¥—Ö–æ–¥—è—â–æ –∑–∞ –∏–Ω—Ç–µ—Ä–∏–æ—Ä –∏ –¥–µ–∫–æ—Ä–∞—Ü–∏—è"],delivery:"–î–æ—Å—Ç–∞–≤–∫–∞..."}, dd2:{title:"–†—É—Å—Ç–∏–∫ –¥—ä—Å–∫–∞",images:["images/dd3.jpg","images/dd4.jpg","images/dd5.jpg"],description:"–ê–≤—Ç–µ–Ω—Ç–∏—á–Ω–∞ —Ä—É—Å—Ç–∏–∫ –¥—ä—Å–∫–∞...",specs:["–†—ä—á–Ω–æ –ø–æ–¥–±—Ä–∞–Ω–∞","–£–Ω–∏–∫–∞–ª–µ–Ω —Ä–µ–ª–µ—Ñ"],delivery:"–î–æ—Å—Ç–∞–≤–∫–∞..."}, dg1:{title:"–°—Ç–∞—Ä–∞ –º–∞—Å–∏–≤–Ω–∞ –≥—Ä–µ–¥–∞",images:["images/logo.png","images/pr–æduct1.jpg"],description:"–ú–∞—Å–∏–≤–Ω–∞ –≥—Ä–µ–¥–∞...",specs:["–ú–∞—Å–∏–≤–Ω–æ –¥—ä—Ä–≤–æ","–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–∞ –ø–∞—Ç–∏–Ω–∞"],delivery:"–î–æ—Å—Ç–∞–≤–∫–∞..."} };

const params=new URLSearchParams(window.location.search);
const productKey=params.get("product");
if(productKey && products[productKey]){
 const p=products[productKey];
 document.getElementById("mainPage").style.display="none";
 document.getElementById("productPage").style.display="block";
 document.getElementById("hero-bg").style.display="none"; 
 document.getElementById("title").innerText=p.title;
 document.getElementById("description").innerText=p.description;
 document.getElementById("delivery").innerText=p.delivery;
 const mainImage=document.getElementById("mainImage");
 const thumbsContainer=document.getElementById("galleryThumbs");
 const lightbox=document.getElementById("lightboxOverlay");
 const lightboxImage=document.getElementById("lightboxImage");
 const leftBtn=document.getElementById("lightboxLeft");
 const rightBtn=document.getElementById("lightboxRight");
 let currentIndex=0;
 function showImage(index){ currentIndex=index; mainImage.src=p.images[currentIndex]; Array.from(thumbsContainer.children).forEach((img,i)=> img.classList.toggle('active', i===index)); lightboxImage.src=p.images[currentIndex]; }
 p.images.forEach((imgSrc,i)=>{ const thumb=document.createElement("img"); thumb.src=imgSrc; if(i===0) thumb.classList.add('active'); thumb.addEventListener('click',()=> showImage(i)); thumbsContainer.appendChild(thumb); });
 document.querySelector('.arrow-left').addEventListener('click',()=> showImage((currentIndex-1+p.images.length)%p.images.length));
 document.querySelector('.arrow-right').addEventListener('click',()=> showImage((currentIndex+1)%p.images.length));
 mainImage.addEventListener('click',()=> lightbox.style.display='flex');
 lightbox.addEventListener('click', e => { if(e.target===lightbox) lightbox.style.display='none'; });
 leftBtn.addEventListener('click', e=>{ e.stopPropagation(); showImage((currentIndex-1+p.images.length)%p.images.length); });
 rightBtn.addEventListener('click', e=>{ e.stopPropagation(); showImage((currentIndex+1)%p.images.length); });
 showImage(0);
 p.specs.forEach(s=>{ const li=document.createElement('li'); li.innerText=s; document.getElementById('specs').appendChild(li); });
}
const goHome=()=>{ window.scrollTo({top:0, behavior:'smooth'}); document.getElementById('mainPage').style.display='block'; document.getElementById('productPage').style.display='none'; document.getElementById('hero-bg').style.display='block'; }
document.getElementById('homeBtn').addEventListener('click',goHome);
document.getElementById('navHome').addEventListener('click',goHome);

// About modal
const aboutModal = document.getElementById('aboutModal');
const closeAboutModal = document.getElementById('closeAboutModal');
document.getElementById('navAbout').addEventListener('click',()=>{
 aboutModal.classList.remove('hidden'); aboutModal.classList.add('flex');
});
closeAboutModal.addEventListener('click',()=>{
 aboutModal.classList.add('hidden'); aboutModal.classList.remove('flex');
});
aboutModal.addEventListener('click', e => { if(e.target===aboutModal){ aboutModal.classList.add('hidden'); aboutModal.classList.remove('flex'); } });
document.querySelectorAll('.aboutNavLink').forEach(link=>{
 link.addEventListener('click', e=>{
 e.preventDefault();
 const target=document.querySelector(link.getAttribute('href'));
 target.scrollIntoView({behavior:'smooth'});
 });
});

document.getElementById('navProducts').addEventListener('click',()=>{ if(document.getElementById('productPage').style.display==='block'){ goHome(); } window.scrollTo({top:document.getElementById('mainPage').offsetTop, behavior:'smooth'}); });
document.getElementById('navContact').addEventListener('click',()=> document.getElementById('contact').scrollIntoView({behavior:'smooth'}));
</script>

<!-- ========== START: Cart UI + Logic (paste this BEFORE </body>) ========== -->
<!-- Cart panel (modal) -->
<div id="cartPanel" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50 p-4">
  <div class="bg-white rounded-xl w-full max-w-3xl p-6 relative">
    <button id="closeCartPanel" class="absolute top-4 right-4 text-[#6B4226] font-bold">‚úï</button>
    <h2 class="text-2xl font-bold mb-4">–í–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—Ü–∞</h2>

    <div id="cartItems" class="space-y-4"></div>

    <div id="cartSummary" class="mt-4 flex justify-between items-center">
      <div id="cartTotal" class="text-xl font-bold">–û–±—â–∞ —Å—É–º–∞: 0 –ª–≤.</div>
      <div>
        <button id="clearCartBtn" class="mr-2 px-4 py-2 rounded border">–ò–∑—á–∏—Å—Ç–∏</button>
        <button id="checkoutPanelBtn" class="bg-[#6B4226] text-white px-4 py-2 rounded">–§–∏–Ω–∞–ª–∏–∑–∏—Ä–∞–π –ø–æ—Ä—ä—á–∫–∞—Ç–∞</button>
      </div>
    </div>
  </div>
</div>

<!-- Toast notification when item added -->
<div id="cartToast" class="fixed bottom-6 right-6 hidden bg-white border-2 border-[#6B4226] rounded p-3 flex items-center gap-3 z-60" style="align-items:center;">
  <img id="cartToastImg" src="" alt="" style="width:48px;height:48px;object-fit:cover;border-radius:4px;">
  <div id="cartToastText" style="font-weight:600;">–î–æ–±–∞–≤–µ–Ω–æ –≤—ä–≤ –≤–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—Ü–∞</div>
</div>

<script>
(function(){
  // map of product keys -> fallback info (only used if your page does not already provide 'products' variable)
  const _localProductMap = {
    dd1:{title:"–°—Ç–∞—Ä–∞ –¥—ä—Ä–≤–µ–Ω–∞ –¥—ä—Å–∫–∞", images:["images/dd1.jpg"], price:120},
    dd2:{title:"–†—É—Å—Ç–∏–∫ –¥—ä—Å–∫–∞", images:["images/dd2.jpg"], price:150},
    dg1:{title:"–°—Ç–∞—Ä–∞ –º–∞—Å–∏–≤–Ω–∞ –≥—Ä–µ–¥–∞", images:["images/dg1.jpg"], price:200}
  };

  // cart stored as array of product keys
  let vl_cart = JSON.parse(localStorage.getItem('vl_cart_v1') || '[]');

  // helper: get product object (prefer existing `products` if present on page)
  function getProduct(key){
    if(typeof products !== 'undefined' && products && products[key]) {
      // if products object has price - great; if not, use fallback price
      const p = Object.assign({}, products[key]);
      if(!p.price && _localProductMap[key]) p.price = _localProductMap[key].price;
      if(!p.images || p.images.length===0) p.images = _localProductMap[key] ? _localProductMap[key].images : [];
      return p;
    }
    return _localProductMap[key] ? Object.assign({}, _localProductMap[key]) : null;
  }

  // update cart count in header
  function updateCartCount(){
    const el = document.querySelector('.cart-count');
    if(el) el.innerText = vl_cart.length;
  }

  // show toast with product
  function showToast(key){
    const p = getProduct(key) || {};
    const toast = document.getElementById('cartToast');
    const img = document.getElementById('cartToastImg');
    const txt = document.getElementById('cartToastText');
    img.src = (p.images && p.images[0]) ? p.images[0] : '';
    txt.innerText = `${p.title || '–ü—Ä–æ–¥—É–∫—Ç'} ‚Äî –¥–æ–±–∞–≤–µ–Ω–æ –≤—ä–≤ –≤–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—Ü–∞`;
    toast.classList.remove('hidden');
    // auto-hide
    clearTimeout(window._vl_toast_timeout);
    window._vl_toast_timeout = setTimeout(()=>{ toast.classList.add('hidden'); }, 2000);
  }

  // render product Buy buttons into the product cards (does not modify original markup except by adding button elements)
  function injectBuyButtons(){
    const mainPage = document.getElementById('mainPage');
    if(!mainPage) return;
    // find product anchors/cards in the main page. Handles both static <a href="...product=dd1"> and card layout
    const anchors = mainPage.querySelectorAll('a[href*="product="]');
    anchors.forEach(a=>{
      // if button already added, skip
      if(a.querySelector('.vl-buy-btn')) return;
      // try to extract product key from href
      try{
        const u = new URL(a.href, location.href);
        const key = u.searchParams.get('product');
        if(!key) return;
        const p = getProduct(key);
        const priceText = p && p.price? `${p.price} –ª–≤.` : '‚Äî';
        // create buy button
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'vl-buy-btn mt-2 bg-[#6B4226] text-white px-4 py-2 rounded';
        btn.dataset.key = key;
        btn.innerText = `–ö—É–ø–∏ ‚Äî ${priceText}`;
        // append into the card: try to find a sensible container inside the card (p-4 etc). If not, append to anchor
        const targetContainer = a.querySelector('.p-4') || a.querySelector('.text-center') || a;
        targetContainer.appendChild(btn);

        // click handler
        btn.addEventListener('click', function(ev){
          ev.preventDefault();
          vl_cart.push(key);
          localStorage.setItem('vl_cart_v1', JSON.stringify(vl_cart));
          updateCartCount();
          showToast(key);
        });
      }catch(e){ /* ignore malformed href */ }
    });
  }

  // render cart panel contents (aggregated)
  function renderCartPanel(){
    const itemsDiv = document.getElementById('cartItems');
    itemsDiv.innerHTML = '';
    const counts = {};
    vl_cart.forEach(k => counts[k] = (counts[k] || 0) + 1);
    let total = 0;
    Object.keys(counts).forEach(key=>{
      const qty = counts[key];
      const p = getProduct(key) || { title: key, images: [''], price: 0 };
      const item = document.createElement('div');
      item.className = 'flex items-center justify-between p-2 bg-gray-50 rounded';
      const leftHTML = `<div class="flex items-center gap-3">
        <img src="${p.images && p.images[0] ? p.images[0] : ''}" alt="" style="width:56px;height:56px;object-fit:cover;border-radius:6px;">
        <div>
          <div style="font-weight:600;">${p.title}</div>
          <div>${p.price} –ª–≤. √ó ${qty}</div>
        </div>
      </div>`;
      const rightHTML = `<div>
        <button class="vl-remove-item bg-red-600 text-white px-2 py-1 rounded" data-key="${key}">–ü—Ä–µ–º–∞—Ö–Ω–∏</button>
      </div>`;
      item.innerHTML = leftHTML + rightHTML;
      itemsDiv.appendChild(item);
      total += (p.price || 0) * qty;
    });
    document.getElementById('cartTotal').innerText = `–û–±—â–∞ —Å—É–º–∞: ${total} –ª–≤.`;

    // attach remove handlers
    itemsDiv.querySelectorAll('.vl-remove-item').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const key = btn.dataset.key;
        // remove ONE instance (you can change to remove all if desired)
        const idx = vl_cart.indexOf(key);
        if(idx > -1) vl_cart.splice(idx,1);
        localStorage.setItem('vl_cart_v1', JSON.stringify(vl_cart));
        updateCartCount();
        renderCartPanel();
      });
    });
  }

  // open/close cart panel
  function openCartPanel(){
    // ensure panel exists
    const panel = document.getElementById('cartPanel');
    if(!panel) return;
    renderCartPanel();
    panel.classList.remove('hidden');
  }
  function closeCartPanel(){
    const panel = document.getElementById('cartPanel');
    if(!panel) return;
    panel.classList.add('hidden');
  }

  // clear cart
  function clearCart(){
    vl_cart = [];
    localStorage.setItem('vl_cart_v1', JSON.stringify(vl_cart));
    updateCartCount();
    renderCartPanel();
  }

  // checkout action
  function checkoutAction(){
    if(vl_cart.length === 0){
      alert('–ù—è–º–∞—Ç–µ –¥–æ–±–∞–≤–µ–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –≤ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞.');
      return;
    }
    // Here you can integrate real checkout ‚Äî for demo we clear and thank user
    alert('–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ –ø–æ—Ä—ä—á–∫–∞—Ç–∞!');
    clearCart();
    closeCartPanel();
  }

  // wire up header cart button (the page has a .cart-btn element)
  function wireHeaderCart(){
    // prefer element with id cartBtn if present, otherwise first .cart-btn
    const headerCart = document.getElementById('cartBtn') || document.querySelector('.cart-btn');
    if(headerCart){
      headerCart.addEventListener('click', function(e){
        e.preventDefault();
        openCartPanel();
      });
    }
  }

  // wire close/clear/checkout buttons in panel
  function wirePanelButtons(){
    const closeBtn = document.getElementById('closeCartPanel');
    if(closeBtn) closeBtn.addEventListener('click', closeCartPanel);
    const clearBtn = document.getElementById('clearCartBtn');
    if(clearBtn) clearBtn.addEventListener('click', clearCart);
    const checkoutBtn = document.getElementById('checkoutPanelBtn');
    if(checkoutBtn) checkoutBtn.addEventListener('click', checkoutAction);
  }

  // initialize everything after DOM ready
  function initCartFeature(){
    injectBuyButtons();
    updateCartCount();
    wireHeaderCart();
    wirePanelButtons();

    // observe DOM for new product cards (if your site injects them later)
    const mainPage = document.getElementById('mainPage');
    if(mainPage && window.MutationObserver){
      const mo = new MutationObserver((mutations)=>{
        injectBuyButtons();
      });
      mo.observe(mainPage, { childList: true, subtree: true });
    }
  }

  // run
  document.addEventListener('DOMContentLoaded', initCartFeature);
})();
</script>
<!-- ========== END: Cart UI + Logic ========== -->

<!-- ========== START: Inject Buy button on product detail page ========== -->
<style>
/* –º–∏–Ω–∏–º–∞–ª–µ–Ω —Å—Ç–∏–ª –∑–∞ –±—É—Ç–æ–Ω–∞ –≤ product page (–Ω–µ –ø—Ä–æ–º–µ–Ω—è —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏—Ç–µ –∫–ª–∞—Å–æ–≤–µ) */
.vl-buy-btn-product { margin-top: 0.5rem; display:inline-block; }
</style>

<script>
(function(){
  // –í–∑–µ–º–∞–Ω–µ –Ω–∞ –∫–ª—é—á–∞ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ –æ—Ç URL (?product=dd1)
  function getProductKeyFromURL(){
    try{ return new URLSearchParams(window.location.search).get('product'); } catch(e){ return null; }
  }

  // –í–∑–µ–º–∞–Ω–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–µ–Ω –æ–±–µ–∫—Ç –æ—Ç –≥–ª–æ–±–∞–ª–Ω–∏—è products, –∞–∫–æ –ª–∏–ø—Å–≤–∞ - fallback
  function getProductObj(key){
    if(!key) return null;
    if(window.products && products[key]) {
      return Object.assign({}, products[key]);
    }
    // fallback (–≤ —Å–ª—É—á–∞–π —á–µ –Ω—è–º–∞—à products –≥–ª–æ–±–∞–ª–Ω–æ)
    const fallback = {
      dd1:{title:"–°—Ç–∞—Ä–∞ –¥—ä—Ä–≤–µ–Ω–∞ –¥—ä—Å–∫–∞", images:["images/dd1.jpg"], price:120},
      dd2:{title:"–†—É—Å—Ç–∏–∫ –¥—ä—Å–∫–∞", images:["images/dd2.jpg"], price:150},
      dg1:{title:"–°—Ç–∞—Ä–∞ –º–∞—Å–∏–≤–Ω–∞ –≥—Ä–µ–¥–∞", images:["images/dg1.jpg"], price:200}
    };
    return fallback[key] ? Object.assign({}, fallback[key]) : { title: key, images: [], price: null };
  }

  // –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞ count –≤ —Ö–µ–¥—ä—Ä–∞
  function updateCartCount(cnt){
    const el = document.querySelector('.cart-count');
    if(el) el.innerText = cnt;
  }

  // –ü–æ–∫–∞–∑–≤–∞ toast: –∏–∑–ø–æ–ª–∑–≤–∞ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏—è #cartToast –∞–∫–æ –∏–º–∞, –∏–Ω–∞—á–µ —Å—ä–∑–¥–∞–≤–∞ –≤—Ä–µ–º–µ–Ω–Ω–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  function showToastWithProduct(key){
    const p = getProductObj(key) || {};
    const toast = document.getElementById('cartToast');
    if(toast){
      const img = document.getElementById('cartToastImg');
      const txt = document.getElementById('cartToastText');
      if(img) img.src = (p.images && p.images[0]) ? p.images[0] : '';
      if(txt) txt.innerText = (p.title ? (p.title + ' ‚Äî –¥–æ–±–∞–≤–µ–Ω–æ –≤—ä–≤ –≤–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—Ü–∞') : '–î–æ–±–∞–≤–µ–Ω–æ –≤—ä–≤ –≤–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—Ü–∞');
      toast.classList.remove('hidden');
      clearTimeout(window._vl_toast_timeout_product);
      window._vl_toast_timeout_product = setTimeout(()=> { toast.classList.add('hidden'); }, 1800);
      return;
    }
    // fallback simple toast
    const tmp = document.createElement('div');
    tmp.style.position='fixed';
    tmp.style.right='16px';
    tmp.style.bottom='16px';
    tmp.style.background='#fff';
    tmp.style.border='2px solid #6B4226';
    tmp.style.padding='10px 12px';
    tmp.style.borderRadius='8px';
    tmp.style.boxShadow='0 6px 18px rgba(0,0,0,0.12)';
    tmp.style.zIndex=9999;
    tmp.innerText = (p.title ? (p.title + ' ‚Äî –¥–æ–±–∞–≤–µ–Ω–æ –≤—ä–≤ –≤–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—Ü–∞') : '–î–æ–±–∞–≤–µ–Ω–æ –≤—ä–≤ –≤–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—Ü–∞');
    document.body.appendChild(tmp);
    setTimeout(()=> tmp.remove(), 1800);
  }

  // –î–æ–±–∞–≤—è/–∏–Ω–∂–µ–∫—Ç–∏—Ä–∞ –±—É—Ç–æ–Ω –ö—É–ø–∏ –∏ —Ü–µ–Ω–∞ –≤ product page (–∫–æ–≥–∞—Ç–æ –µ –≤–∏–¥–∏–º)
  function addBuyButtonToProductPage(){
    const key = getProductKeyFromURL();
    if(!key) return; // –Ω—è–º–∞ –ø—Ä–æ–¥—É–∫—Ç –≤ URL
    const titleEl = document.getElementById('title');
    if(!titleEl) return; // —Å—Ç—Ä—É–∫—Ç—É—Äa—Ç–∞ –Ω–µ –µ –Ω–∞–ª–∏—á–Ω–∞
    const parent = titleEl.parentElement;
    if(!parent) return;

    // –ê–∫–æ –≤–µ—á–µ –∏–º–∞ –±—É—Ç–æ–Ω - –Ω–µ –¥–æ–±–∞–≤—è–º–µ –≤—Ç–æ—Ä–∏
    if(parent.querySelector('.vl-buy-btn-product')) return;

    const p = getProductObj(key);
    const priceText = (p && p.price) ? (p.price + ' –ª–≤.') : '‚Äî';

    // –°—ä–∑–¥–∞–≤–∞–º–µ –µ–ª–µ–º–µ–Ω—Ç–∏
    const priceEl = document.createElement('p');
    priceEl.className = 'vl-buy-price text-[#6B4226] font-bold mb-2';
    priceEl.innerText = priceText;

    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'vl-buy-btn-product vl-buy-btn bg-[#6B4226] text-white px-4 py-2 rounded';
    btn.dataset.key = key;
    btn.innerText = '–ö—É–ø–∏ ‚Äî ' + priceText;

    // –ö–ª–∏–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫: –¥–æ–±–∞–≤—è–Ω–µ –≤ localStorage –º–∞—Å–∏–≤–∞ vl_cart_v1, –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –±—Ä–æ—è, –ø–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    btn.addEventListener('click', function(e){
      e.preventDefault();
      // –∫—Ä–∞—Ç–∫–∞ –∞–Ω–∏–º–∞—Ü–∏—è (–∞–∫–æ –∏–º–∞—à –∫–ª–∞—Å–∞ vl-buy-anim/–≤–ª–∏–∑–∞—â–∏ —Å—Ç–∏–ª–æ–≤–µ)
      try{ btn.classList.remove('vl-buy-anim'); void btn.offsetWidth; btn.classList.add('vl-buy-anim'); }catch(e){}

      let cart = [];
      try{ cart = JSON.parse(localStorage.getItem('vl_cart_v1') || '[]'); }catch(e){ cart = []; }
      cart.push(key);
      localStorage.setItem('vl_cart_v1', JSON.stringify(cart));
      updateCartCount(cart.length);
      showToastWithProduct(key);
    });

    // –î–æ–±–∞–≤—è–º–µ price + –±—É—Ç–æ–Ω –≤ DOM, –ø–æ–¥ #title (–Ω–µ –ø—Ä–µ–º–∞—Ö–≤–∞–º–µ –Ω–∏—â–æ)
    parent.appendChild(priceEl);
    parent.appendChild(btn);
  }

  // –°—Ç–∞—Ä—Ç–∏—Ä–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –∏ –Ω–∞–±–ª—é–¥–∞–≤–∞ DOM –∑–∞ –ø—Ä–æ–º–µ–Ω–∏ (–≤ —Å–ª—É—á–∞–π, —á–µ productPage —Å–µ –∑–∞—Ä–µ–∂–¥–∞ –¥–∏–Ω–∞–º–∏—á–Ω–æ)
  function init(){
    // initial attempt
    addBuyButtonToProductPage();

    // observe changes that might add the product detail later
    if(window.MutationObserver){
      const mo = new MutationObserver((mut)=>{
        addBuyButtonToProductPage();
      });
      mo.observe(document.body, { childList:true, subtree:true });
    }

    // —Å—ä—â–æ –æ–ø–∏—Ç –ø—Ä–∏ history API –ø—Ä–æ–º—è–Ω–∞ (–∞–∫–æ —Å–∞–π—Ç—ä—Ç –ø—Ä–æ–º–µ–Ω—è URL –±–µ–∑ –ø—Ä–µ–∑–∞—Ä–µ–∂–¥–∞–Ω–µ)
    window.addEventListener('popstate', addBuyButtonToProductPage);
    window.addEventListener('pushstate', addBuyButtonToProductPage);
    // note: some frameworks use pushState directly ‚Äî we listen to popstate; MutationObserver covers most cases
  }

  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>
<!-- ========== END: Inject Buy button on product detail page ========== -->

<!-- ========== START: Small UI animations (paste this BEFORE </body>) ========== -->
<style>
/* Buy button subtle bump */
.vl-buy-btn { transition: transform .12s ease, box-shadow .12s ease; will-change: transform; }
.vl-buy-anim { animation: btn-bump .28s cubic-bezier(.2,.8,.2,1); }
@keyframes btn-bump {
  0% { transform: scale(1); }
  40% { transform: scale(1.08); }
  100% { transform: scale(1); }
}

/* Toast pop animation */
#cartToast { opacity: 0; transform: translateY(8px); transition: opacity .25s ease, transform .25s ease; }
#cartToast:not(.hidden) { opacity: 1; transform: translateY(0); animation: toast-pop .35s ease; }
@keyframes toast-pop {
  0% { opacity: 0; transform: translateY(12px) scale(.98); }
  60% { transform: translateY(0) scale(1.02); }
  100% { transform: translateY(0) scale(1); }
}

/* Cart panel entrance */
#cartPanel > div { transform: translateY(-8px); opacity: 0; transition: transform .25s ease, opacity .25s ease; }
#cartPanel:not(.hidden) > div { transform: translateY(0); opacity: 1; }

/* Cart count pulse */
.cart-count { display: inline-flex; align-items: center; justify-content: center; transition: transform .18s ease; }
.cart-count.pulse { animation: count-pulse .42s ease; }
@keyframes count-pulse {
  0% { transform: scale(1); }
  30% { transform: scale(1.25); }
  60% { transform: scale(.95); }
  100% { transform: scale(1); }
}

/* Small accessible focus/hover hint for buy buttons */
.vl-buy-btn:focus, .vl-buy-btn:hover { box-shadow: 0 6px 18px rgba(0,0,0,0.12); outline: none; }
</style>

<script>
(function(){
  // animate a buy button briefly (adds class then removes)
  function animateButtonOnce(btn){
    if(!btn) return;
    btn.classList.remove('vl-buy-anim');
    // force reflow to restart animation
    void btn.offsetWidth;
    btn.classList.add('vl-buy-anim');
    setTimeout(()=> btn.classList.remove('vl-buy-anim'), 340);
  }

  // Delegate click on any buy button (including those added later)
  document.addEventListener('click', function(e){
    const btn = e.target.closest && e.target.closest('.vl-buy-btn');
    if(btn){
      animateButtonOnce(btn);
      // small ripple-like effect handled by animation class only; do NOT interfere with existing click handlers
    }
  }, true);

  // Pulse cart-count when it changes (mutation observer)
  const cartCountEl = document.querySelector('.cart-count');
  if(cartCountEl){
    const mo = new MutationObserver(() => {
      cartCountEl.classList.remove('pulse');
      // force reflow then add
      void cartCountEl.offsetWidth;
      cartCountEl.classList.add('pulse');
      // remove after animation to keep DOM clean
      clearTimeout(window._vl_count_timeout);
      window._vl_count_timeout = setTimeout(()=> cartCountEl.classList.remove('pulse'), 600);
    });
    mo.observe(cartCountEl, { childList: true, characterData: true, subtree: true });
  }

  // Ensure toast shows with animation even if existing script toggles 'hidden'
  // No changes to existing showToast required; CSS will animate when class is removed.
  // But add keyboard-closable support: ESC closes cart panel and hides toast
  document.addEventListener('keydown', function(e){
    if(e.key === 'Escape'){
      const panel = document.getElementById('cartPanel');
      if(panel && !panel.classList.contains('hidden')) panel.classList.add('hidden');
      const toast = document.getElementById('cartToast');
      if(toast && !toast.classList.contains('hidden')) toast.classList.add('hidden');
    }
  });

  // Minor safety: when cart panel becomes visible via class toggle, focus first button for accessibility
  const cartPanel = document.getElementById('cartPanel');
  if(cartPanel && window.MutationObserver){
    const moPanel = new MutationObserver((mutations)=>{
      for(const m of mutations){
        if(m.attributeName === 'class'){
          if(!cartPanel.classList.contains('hidden')){
            // focus close button for quick escape
            const closeBtn = document.getElementById('closeCartPanel');
            if(closeBtn) closeBtn.focus({preventScroll:true});
          }
        }
      }
    });
    moPanel.observe(cartPanel, { attributes: true });
  }

  // If new buy buttons are injected later, we already handle click via event delegation (no need to rebind)
})();
</script>
<!-- ========== END: Small UI animations (paste this BEFORE </body>) ========== -->

</body>
</html>
